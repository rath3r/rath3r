"use strict";var rath3rApp=angular.module("rath3rApp",["ngRoute","ngSanitize"]);rath3rApp.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"mainCtrl"}).when("/post/:id",{templateUrl:"views/post.html",controller:"postCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"aboutCtrl"}),b.html5Mode(!0)}]),rath3rApp.controller("mainCtrl",["$scope","$http",function(a,b){a.message="",a.posts={title:"Loading"},a.loading=!0,a.posts={};var c="https://public-api.wordpress.com/rest/v1.1/sites/blog.rath3r.com/posts/";b.get(c).success(function(b){a.posts=b.posts,a.loading=!1}).error(function(){})}]),rath3rApp.controller("aboutCtrl",["$scope","$http",function(a,b){function c(a){function b(a,b){return a.dateStarted<b.dateStarted?-1:a.dateStarted>b.dateStarted?1:0}var c,d,e,f,g,h,i,j,k,l,m=$("#chartHolder").width(),n=new Date,o=n.getTime(),p=n.getFullYear(),q=[],r=20;a.sort(b),c=Math.min.apply(null,Object.keys(a).map(function(b){return Date.parse(a[b].dateStarted)})),f=Math.max.apply(null,Object.keys(a).map(function(b){return Date.parse(a[b].dateStarted)})),g=o-c,d=new Date(c),e=d.getFullYear(),h=m/g;for(var s=0;s<a.length;s++)i=Math.ceil((Date.parse(a[s].dateStarted)-c)*h),j=Math.ceil(a[s].dateFinished&&!a[s].stillUsing?(Date.parse(a[s].dateFinished)-Date.parse(a[s].dateStarted))*h:(o-Date.parse(a[s].dateStarted))*h),q.push({y:i,title:a[s].title,width:j});k=d3.select(".chart").attr("width",m).attr("height",r*q.length),l=k.selectAll("g").data(q).enter().append("g").attr("transform",function(a,b){return"translate("+a.y+","+(b*r+20)+")"}),l.append("rect").attr("width",function(a,b){return a.width}).attr("height",r-1),l.append("text").attr("x",function(a){return 10}).attr("y",r/2).attr("dy",".35em").text(function(a){return a.title}),d3.select(".chart").append("text").attr("class","label").attr("x",0).attr("y",10).attr("dy",".35em").text(e),d3.select(".chart").append("text").attr("class","label").attr("x",m-25).attr("y",10).attr("dy",".35em").text(p)}function d(a){}function e(){var a=(d3.select("#be-sites").attr("width","100%").attr("height","200px;"),[1,1,2,3,5,8,13,21]),b=d3.pie()(a);console.log(b)}a.message="This is the about page?",a.posts={title:"Loading"},a.skillsLoader=!0,a.sitesLoader=!0,b.get("http://dev.rath3rapi.com/json/skills").success(function(b){c(b),a.skillsLoader=!1}).error(function(){}),b.get("http://dev.rath3rapi.com/json/sites").success(function(b){d(b),a.sitesLoader=!1}).error(function(){}),e()}]),rath3rApp.controller("postCtrl",["$http","$scope","$routeParams",function(a,b,c){b.post={},b.loading=!0;var d="https://public-api.wordpress.com/rest/v1.1/sites/blog.rath3r.com/posts/"+c.id;a.get(d).success(function(a){b.post=a,b.loading=!1}).error(function(){})}]);